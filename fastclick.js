(function(){"use strict";function t(e,r){var i;r=r||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=r.touchBoundary||10;this.layer=e;this.tapDelay=r.tapDelay||200;this.tapTimeout=r.tapTimeout||700;if(t.notNeeded(e)){return}function a(t,e){return function(){return t.apply(e,arguments)}}var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var s=this;for(var u=0,l=o.length;u<l;u++){s[o[u]]=a(s[o[u]],s)}if(n){e.addEventListener("mouseover",this.onMouse,true);e.addEventListener("mousedown",this.onMouse,true);e.addEventListener("mouseup",this.onMouse,true)}e.addEventListener("click",this.onClick,true);e.addEventListener("touchstart",this.onTouchStart,false);e.addEventListener("touchmove",this.onTouchMove,false);e.addEventListener("touchend",this.onTouchEnd,false);e.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;if(t==="click"){i.call(e,t,n.hijacked||n,r)}else{i.call(e,t,n,r)}};e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;if(t==="click"){i.call(e,t,n.hijacked||(n.hijacked=function(t){if(!t.propagationStopped){n(t)}}),r)}else{i.call(e,t,n,r)}}}if(typeof e.onclick==="function"){i=e.onclick;e.addEventListener("click",function(t){i(t)},false);e.onclick=null}}var e=navigator.userAgent.indexOf("Windows Phone")>=0;var n=navigator.userAgent.indexOf("Android")>0&&!e;var r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e;var i=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent);var a=r&&/OS [6-7]_\d/.test(navigator.userAgent);var o=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled){return true}break;case"input":if(r&&t.type==="file"||t.disabled){return true}break;case"label":case"iframe":case"video":return true}return/\bneedsclick\b/.test(t.className)};t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return true;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}};t.prototype.sendClick=function(t,e){var n,r;if(document.activeElement&&document.activeElement!==t){document.activeElement.blur()}r=e.changedTouches[0];n=document.createEvent("MouseEvents");n.initMouseEvent(this.determineEventType(t),true,true,window,1,r.screenX,r.screenY,r.clientX,r.clientY,false,false,false,false,0,null);n.forwardedTouchEvent=true;t.dispatchEvent(n)};t.prototype.determineEventType=function(t){if(n&&t.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};t.prototype.focus=function(t){var e;if(r&&t.setSelectionRange&&t.type.indexOf("date")!==0&&t.type!=="time"&&t.type!=="month"){e=t.value.length;t.setSelectionRange(e,e)}else{t.focus()}};t.prototype.updateScrollParent=function(t){var e,n;e=t.fastClickScrollParent;if(!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n;t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}if(e){e.fastClickLastScrollTop=e.scrollTop}};t.prototype.getTargetElementFromEventTarget=function(t){if(t.nodeType===Node.TEXT_NODE){return t.parentNode}return t};t.prototype.onTouchStart=function(t){var e,n,a;if(t.targetTouches.length>1){return true}e=this.getTargetElementFromEventTarget(t.target);n=t.targetTouches[0];if(r){a=window.getSelection();if(a.rangeCount&&!a.isCollapsed){return true}if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier){t.preventDefault();return false}this.lastTouchIdentifier=n.identifier;this.updateScrollParent(e)}}this.trackingClick=true;this.trackingClickStart=t.timeStamp;this.targetElement=e;this.touchStartX=n.pageX;this.touchStartY=n.pageY;if(t.timeStamp-this.lastClickTime<this.tapDelay){t.preventDefault()}return true};t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;if(Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n){return true}return false};t.prototype.onTouchMove=function(t){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t)){this.trackingClick=false;this.targetElement=null}return true};t.prototype.findControl=function(t){if(t.control!==undefined){return t.control}if(t.htmlFor){return document.getElementById(t.htmlFor)}return t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};t.prototype.onTouchEnd=function(t){var e,o,s,u,l,c=this.targetElement;if(!this.trackingClick){return true}if(t.timeStamp-this.lastClickTime<this.tapDelay){this.cancelNextClick=true;return true}if(t.timeStamp-this.trackingClickStart>this.tapTimeout){return true}this.cancelNextClick=false;this.lastClickTime=t.timeStamp;o=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(a){l=t.changedTouches[0];c=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||c;c.fastClickScrollParent=this.targetElement.fastClickScrollParent}s=c.tagName.toLowerCase();if(s==="label"){e=this.findControl(c);if(e){this.focus(c);if(n){return false}c=e}}else if(this.needsFocus(c)){if(t.timeStamp-o>100||r&&window.top!==window&&s==="input"){this.targetElement=null;return false}this.focus(c);this.sendClick(c,t);if(!r||s!=="select"){this.targetElement=null;t.preventDefault()}return false}if(r&&!i){u=c.fastClickScrollParent;if(u&&u.fastClickLastScrollTop!==u.scrollTop){return true}}if(!this.needsClick(c)){t.preventDefault();this.sendClick(c,t)}return false};t.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};t.prototype.onMouse=function(t){if(!this.targetElement){return true}if(t.forwardedTouchEvent){return true}if(!t.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(t.stopImmediatePropagation){t.stopImmediatePropagation()}else{t.propagationStopped=true}t.stopPropagation();t.preventDefault();return false}return true};t.prototype.onClick=function(t){var e;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(t.target.type==="submit"&&t.detail===0){return true}e=this.onMouse(t);if(!e){this.targetElement=null}return e};t.prototype.destroy=function(){var t=this.layer;if(n){t.removeEventListener("mouseover",this.onMouse,true);t.removeEventListener("mousedown",this.onMouse,true);t.removeEventListener("mouseup",this.onMouse,true)}t.removeEventListener("click",this.onClick,true);t.removeEventListener("touchstart",this.onTouchStart,false);t.removeEventListener("touchmove",this.onTouchMove,false);t.removeEventListener("touchend",this.onTouchEnd,false);t.removeEventListener("touchcancel",this.onTouchCancel,false)};t.notNeeded=function(t){var e;var r;var i;var a;if(typeof window.ontouchstart==="undefined"){return true}r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(r){if(n){e=document.querySelector("meta[name=viewport]");if(e){if(e.content.indexOf("user-scalable=no")!==-1){return true}if(r>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(o){i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(i[1]>=10&&i[2]>=3){e=document.querySelector("meta[name=viewport]");if(e){if(e.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(t.style.msTouchAction==="none"||t.style.touchAction==="manipulation"){return true}a=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(a>=27){e=document.querySelector("meta[name=viewport]");if(e&&(e.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)){return true}}if(t.style.touchAction==="none"||t.style.touchAction==="manipulation"){return true}return false};t.attach=function(e,n){return new t(e,n)};if(typeof define==="function"&&typeof define.amd==="object"&&define.amd){define(function(){return t})}else if(typeof module!=="undefined"&&module.exports){module.exports=t.attach;module.exports.FastClick=t}else{window.FastClick=t}if("addEventListener"in document){document.addEventListener("DOMContentLoaded",function(){t.attach(document.body)},false)}})();